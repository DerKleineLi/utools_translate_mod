const{remote,ipcRenderer}=require("electron"),browserWindow=remote.getCurrentWindow();window.utools.isWindows()?browserWindow.setAlwaysOnTop(!0,"status"):browserWindow.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0}),browserWindow.on("close",(e=>{e.preventDefault()})),browserWindow.on("blur",(()=>{window.isDing||browserWindow.hide()}));let autoClearInputTimeout=null;browserWindow.on("hide",(()=>{autoClearInputTimeout&&clearTimeout(autoClearInputTimeout),autoClearInputTimeout=setTimeout((()=>{autoClearInputTimeout=null,window.clearTranslate()}),6e4)})),ipcRenderer.once("ping",(e=>{e.sender.sendTo(e.senderId,"pong")})),ipcRenderer.on("show",((e,o)=>{if(autoClearInputTimeout&&(clearTimeout(autoClearInputTimeout),autoClearInputTimeout=null),!window.isDing&&!browserWindow.isVisible()){const e=window.utools.getDisplayNearestPoint(window.utools.getCursorScreenPoint()),o=Math.round(e.bounds.x+(e.bounds.width-1024)/2),n=Math.round(e.bounds.y+(e.bounds.height-600)/2);browserWindow.setPosition(o,n),browserWindow.show()}window.translate(o)})),window.hideTranslateWindow=()=>{window.isDing||(browserWindow.hide(),browserWindow.blur())};